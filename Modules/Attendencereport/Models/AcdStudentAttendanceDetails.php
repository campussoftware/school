<?php/* * To change this license header, choose License Headers in Project Properties. * To change this template file, choose Tools | Templates * and open the template in the editor. *//** * Description of AcdExaminationMarks * * @author ramesh */namespace Modules\Attendencereport\Models;use Core\Model\Node;class AcdStudentAttendanceDetails extends Node{    public $_studentId = NULL;    public $_admissionNo=NULL;    public $_academicYear=NULL;    public $_firstDay=NULL;    public $_lastDay=NULL;    public function setStudentId($studentId) {        $this->_studentId = $studentId;        return $this;    }    public function getStudentId() {        return $this->_studentId;    }    public function setAdmissionNo($admissionNo) {        $this->_admissionNo = $admissionNo;        return $this;    }    public function getAdmissionNo() {        return $this->_admissionNo;    }    public function setAcademicyear($academicYear) {        $this->_academicYear = $academicYear;        return $this;    }    public function getAcademicyear() {        return $this->_academicYear;    }      public function setFirstDay($firstDay) {        $this->_firstDay = $firstDay;        return $this;    }    public function getFirstDay() {        return $this->_firstDay;    }      public function setLastDay($lastDay) {        $this->_lastDay = $lastDay;        return $this;    }    public function getLastDay() {        return $this->_lastDay;    }    public function getstudentAttendanceData(){            $result = [];        $acdYearId=$this->getAcademicyear();         $studentHistoryModel = \CoreClass::getModel("student_history");        $studentHistoryModel->setAcademicyear($acdYearId);        $studentHistoryModel->setStudentId($this->getStudentId());        $studentInfo=$studentHistoryModel->getStudentinfo();          $attendanceModel = \CoreClass::getModel("acd_student_attendance");        $attendanceModel->setFirstDay($this->getFirstDay());        $attendanceModel->setLastDay($this->getLastDay());        $acdID=$attendanceModel->getAttendanceDates();         if(\Core::countArray($acdID)>0){            foreach ($acdID as $key => $value) {                $nodeModel = \CoreClass::getModel("acd_student_attendance_details");                $nodeModel->setNodeName('acd_student_attendance_details');                 $nodeModel->addCustomFieldToSelect("acd_student_attendance_details.id", "id");                $nodeModel->addCustomFieldToSelect("acd_student_attendance_details.admission_no", "admission_no");                $nodeModel->addCustomFieldToSelect("acd_student_attendance_details.name", "student_name");                $nodeModel->addCustomFieldToSelect("acd_student_attendance.date", "atd_date");                 $nodeModel->addCustomFieldToSelect("cur_list_attendancefrequency.name", "atd_frequency");                 $nodeModel->addCustomFieldToSelect("core_attendance_status.name", "atd_status");                  $nodeModel->addCustomJoin("acd_student_attendance.id", "acd_student_attendance", "acd_student_attendance", "acd_student_attendance.id=acd_student_attendance_details.acd_student_attendance_id");                $nodeModel->addCustomJoin("cur_list_attendancefrequency.id", "cur_list_attendancefrequency", "cur_list_attendancefrequency", "cur_list_attendancefrequency.id=acd_student_attendance_details.cur_list_attendancefrequency_id");                $nodeModel->addCustomJoin("core_attendance_status.id", "core_attendance_status", "core_attendance_status", "core_attendance_status.short_code=acd_student_attendance_details.core_attendance_status_id");                $nodeModel->addCustomFilter("acd_student_attendance_details.cur_list_academicyear_id='".$acdYearId."'");                $nodeModel->addCustomFilter("acd_student_attendance_details.acd_student_attendance_id='".\Core::getValueFromArray($value, "id")."'");                $nodeModel->addCustomFilter("acd_student_attendance_details.cur_branch_class_id='".\Core::getValueFromArray($studentInfo, "cur_branch_class_id")."'");                $nodeModel->addCustomFilter("acd_student_attendance_details.cur_branch_class_section_id='".\Core::getValueFromArray($studentInfo, "cur_branch_class_section_id")."'");                $nodeModel->addCustomFilter("acd_student_attendance_details.student_admission_id='".\Core::getValueFromArray($studentInfo, "student_admission_id")."'");                $nodeModel->getCollection();                $result[\Core::getValueFromArray($value, "id")] = $nodeModel->_collections;                }        }        return $result;    }}