<?php/* * To change this license header, choose License Headers in Project Properties. * To change this template file, choose Tools | Templates * and open the template in the editor. *//** * Description of AcdExaminationMarks * * @author ramesh */namespace Modules\Academics\Models;use Core\Model\Node;class AcdStudentmarksDetails extends Node{    public $_studentId = NULL;    public $_admissionNo=NULL;    public $_academicYear=NULL;    public $_branchclassId=NULL;    public $_sectionId = NULL;    public $_sheduleId=NULL;    public function setSheduleId($sheduleId) {        $this->_sheduleId = $sheduleId;        return $this;    }    public function getSheduleId() {        return $this->_sheduleId;    }        public function setBranchClass($branchclassId) {        $this->_branchclassId = $branchclassId;        return $this;    }    public function getBranchClass() {        return $this->_branchclassId;    }    public function setSectionId($sectionId) {        $this->_sectionId = $sectionId;        return $this;    }    public function getSectionId() {        return $this->_sectionId;    }    public function setStudentId($studentId) {        $this->_studentId = $studentId;        return $this;    }    public function getStudentId() {        return $this->_studentId;    }    public function setAdmissionNo($admissionNo) {        $this->_admissionNo = $admissionNo;        return $this;    }    public function getAdmissionNo() {        return $this->_admissionNo;    }    public function setAcademicyear($academicYear) {        $this->_academicYear = $academicYear;        return $this;    }    public function getAcademicyear() {        return $this->_academicYear;    }        public function examMarksData(){                       $acdYearId=$this->getAcademicyear();          $nodeModel = \CoreClass::getModel("acd_examination_marks");        $nodeModel->setNodeName('acd_examination_marks');         $nodeModel->addCustomFieldToSelect("acd_examination_marks.id", "id");        $nodeModel->addCustomFieldToSelect("acd_exam_name.name", "acd_exam_name");        $nodeModel->addCustomJoin("acd_exam_name.id", "acd_exam_name", "acd_exam_name", "acd_exam_name.id=acd_examination_marks.acd_exam_name_id");        $nodeModel->addCustomFilter("acd_examination_marks.is_final='1'");                $nodeModel->getCollection();        $output = $nodeModel->_collections;               if(\Core::countArray($output)>0){            foreach ($output as $key => $value) {                $examMarksId=\Core::getValueFromArray($value, "id");                $nodeModel = \CoreClass::getModel("acd_studentmarks_details");                                $nodeModel->setNodeName('acd_studentmarks_details');                 $nodeModel->addCustomFieldToSelect("acd_studentmarks_details.id", "id");                $nodeModel->addCustomFieldToSelect("acd_studentmarks_details.admission_no", "admission_no");                $nodeModel->addCustomFieldToSelect("acd_studentmarks_details.name", "name");                $nodeModel->addCustomFieldToSelect("cur_academic_subject.name", "subject_name");                $nodeModel->addCustomFieldToSelect("acd_studentmarks_details.total_marks", "total_marks");                $nodeModel->addCustomFieldToSelect("acd_studentmarks_details.max_marks", "max_marks");                $nodeModel->addCustomFieldToSelect("acd_studentmarks_details.cutoff_marks", "cutoff_marks");                $nodeModel->addCustomFieldToSelect("acd_studentmarks_details.min_marks", "min_marks");                $nodeModel->addCustomFieldToSelect("acd_studentmarks_details.obtained_marks", "obtained_marks");                $nodeModel->addCustomFieldToSelect("acd_studentmarks_details.percentage", "percentage");                $nodeModel->addCustomFieldToSelect("acd_studentmarks_details.gradepoints", "gradepoints");                $nodeModel->addCustomFieldToSelect("acd_studentmarks_details.grade", "grade");                $nodeModel->addCustomFieldToSelect("core_attendance_status.name", "attendence_status");                $nodeModel->addCustomJoin("cur_academic_subject.id", "cur_academic_subject", "cur_academic_subject", "cur_academic_subject.id=acd_studentmarks_details.cur_academic_subject_id");                $nodeModel->addCustomJoin("core_attendance_status.id", "core_attendance_status", "core_attendance_status", "core_attendance_status.short_code=acd_studentmarks_details.core_attendance_status_id");                $nodeModel->addCustomFilter("acd_studentmarks_details.acd_examination_marks_id='".$examMarksId."'");                  $nodeModel->addCustomFilter("acd_studentmarks_details.admission_no='".$this->getAdmissionNo()."'");                  $nodeModel->addCustomFilter("acd_studentmarks_details.cur_list_academicyear_id='".$acdYearId."'");                  $nodeModel->getCollection();                $result[$examMarksId] ['exam_id']=\Core::getValueFromArray($value, "id");                $result[$examMarksId] ['exam_name']=\Core::getValueFromArray($value, "acd_exam_name");                $result[$examMarksId]['marks'] = $nodeModel->_collections;                                }        }               return $result;    }    public function studentMarksDetails() {        $nodeModel = \CoreClass::getModel("acd_studentmarks_details");                        $nodeModel->setNodeName('acd_studentmarks_details');         $nodeModel->addCustomFieldToSelect("acd_studentmarks_details.id", "id");        $nodeModel->addCustomFieldToSelect("acd_examination_marks.id", "esid");        $nodeModel->addCustomFieldToSelect("acd_exam_name.name", "exam_name");        $nodeModel->addCustomFieldToSelect("acd_examination_marks.list_branch_id", "list_branch_id");        $nodeModel->addCustomFieldToSelect("acd_examination_marks.cur_branch_orientation_id", "branch_orientation_id");        $nodeModel->addCustomFieldToSelect("acd_examination_marks.cur_branch_class_section_id", "branch_class_section_id");        $nodeModel->addCustomFieldToSelect("acd_studentmarks_details.cur_class_subject_id", "class_subject_id");        $nodeModel->addCustomFieldToSelect("cur_academic_subject.name", "subject_name");        $nodeModel->addCustomFieldToSelect("acd_studentmarks_details.admission_no", "admission_no");        $nodeModel->addCustomFieldToSelect("acd_studentmarks_details.max_marks", "max_marks");        $nodeModel->addCustomFieldToSelect("acd_studentmarks_details.obtained_marks", "obtained_marks");        $nodeModel->addCustomFieldToSelect("acd_studentmarks_details.percentage", "percentage");        $nodeModel->addCustomFieldToSelect("core_attendance_status.name", "attendance_status_id");        $nodeModel->addCustomFieldToSelect("acd_studentmarks_details.gradepoints", "gradepoints");        $nodeModel->addCustomFieldToSelect("acd_studentmarks_details.grade", "grade");        $nodeModel->addCustomFieldToSelect("acd_studentmarks_details.remarks", "remarks");        $nodeModel->addCustomJoin("acd_examination_marks.id", "acd_examination_marks", "acd_examination_marks", "acd_examination_marks.id=acd_studentmarks_details.acd_examination_marks_id");        $nodeModel->addCustomJoin("acd_exam_name.id", "acd_exam_name", "acd_exam_name", "acd_exam_name.id=acd_examination_marks.acd_exam_name_id");        $nodeModel->addCustomJoin("acd_examination_schedule.id", "acd_examination_schedule", "acd_examination_schedule", "acd_examination_schedule.id=acd_studentmarks_details.acd_examination_schedule_id");        $nodeModel->addCustomJoin("core_attendance_status.id", "core_attendance_status", "core_attendance_status", "core_attendance_status.short_code=acd_studentmarks_details.core_attendance_status_id");        $nodeModel->addCustomJoin("cur_class_subject.id", "cur_class_subject", "cur_class_subject", "cur_class_subject.id=acd_studentmarks_details.cur_class_subject_id");        $nodeModel->addCustomJoin("cur_academic_subject.id", "cur_academic_subject", "cur_academic_subject", "cur_academic_subject.id=cur_class_subject.cur_academic_subject_id");        $nodeModel->addCustomFilter("acd_studentmarks_details.cur_list_academicyear_id='".$this->getAcademicyear()."'");         $nodeModel->addCustomFilter("acd_studentmarks_details.cur_branch_class_id='".$this->getBranchClass()."'");         if($this->getAdmissionNo()>0){        $nodeModel->addCustomFilter("acd_studentmarks_details.cur_branch_class_section_id='".$this->getSectionId()."'");          }        if($this->getSectionId()>0){        $nodeModel->addCustomFilter("acd_studentmarks_details.admission_no='".$this->getAdmissionNo()."'");            }        $nodeModel->setCustomOrderBy();        $nodeModel->addCustomOrderBy("acd_studentmarks_details.id", "ASC");        $nodeModel->getCollection();        $result = $nodeModel->_collections;            return $result;    }                            }