<?php/* * To change this license header, choose License Headers in Project Properties. * To change this template file, choose Tools | Templates * and open the template in the editor. *//** * Description of AcdExaminationMarks * * @author ramesh */namespace Modules\Staffmanagement\Models;use Core\Model\Node;class StaffStaffSubjects extends Node{    public $_teacherId = NULL;    public $_admissionNo=NULL;    public $_classId=NULL;    public $_sectionId=NULL;    public function setTeacherId($teacherId) {        $this->_teacherId = $teacherId;        return $this;    }    public function getTeacherId() {        return $this->_teacherId;    }     public function setClassId($classId) {        $this->_classId = $classId;        return $this;    }    public function getClassId() {        return $this->_classId;    }     public function setSectionId($sectionId) {        $this->_sectionId = $sectionId;        return $this;    }    public function getSectionId() {        return $this->_sectionId;    }     public function staffSubjectDetails(){                          $nodeModel = \CoreClass::getModel($this->_nodeName);        $nodeModel->setNodeName($this->_nodeName);        $nodeModel->addCustomFieldToSelect("staff_staff_subjects.id", "id");        $nodeModel->addCustomFieldToSelect("staff_staff_deatils.id", "staffId");        $nodeModel->addCustomFieldToSelect("staff_staff_deatils.staff_id", "staff_id");        $nodeModel->addCustomFieldToSelect("staff_staff_deatils.staff_code", "staff_code");        $nodeModel->addCustomFieldToSelect("staff_staff_deatils.first_name", "first_name");        $nodeModel->addCustomFieldToSelect("staff_staff_deatils.middle_name", "middle_name");        $nodeModel->addCustomFieldToSelect("staff_staff_deatils.last_name", "last_name");        $nodeModel->addCustomFieldToSelect("staff_staff_deatils.email", "email");        $nodeModel->addCustomFieldToSelect("staff_staff_deatils.mobile_number", "mobile_number");        $nodeModel->addCustomFieldToSelect("staff_staff_deatils.phone_number", "phone_number");        $nodeModel->addCustomFieldToSelect("staff_staff_deatils.image", "image");        $nodeModel->addCustomFieldToSelect("cur_subject_type.name", "subject_type");        $nodeModel->addCustomFieldToSelect("cur_academic_subject.name", "subject_name");        $nodeModel->addCustomFieldToSelect("staff_staff_info.staff_designation_id", "staff_designation_id");        $nodeModel->addCustomFieldToSelect("staff_designation.name", "designation");        $nodeModel->addCustomJoin("staff_staff_deatils.id", "staff_staff_deatils", "staff_staff_deatils", "staff_staff_deatils.id=staff_staff_subjects.staff_staff_deatils_id");        $nodeModel->addCustomJoin("cur_academic_subject.id", "cur_academic_subject", "cur_academic_subject", "cur_academic_subject.id=staff_staff_subjects.cur_academic_subject_id");        $nodeModel->addCustomJoin("cur_subject_type.id", "cur_subject_type", "cur_subject_type", "cur_subject_type.short_code=staff_staff_subjects.cur_subject_type_id");        $nodeModel->addCustomJoin("staff_staff_info.id", "staff_staff_info", "staff_staff_info", "staff_staff_info.staff_staff_deatils_id=staff_staff_deatils.id");        $nodeModel->addCustomJoin("staff_designation.id", "staff_designation", "staff_designation", "staff_designation.code=staff_staff_info.staff_designation_id");        $nodeModel->addCustomFilter("cur_branch_class_id='" . $this->getClassId() . "'");        $nodeModel->addCustomFilter("cur_branch_class_section_id='" . $this->getSectionId() . "'");        $nodeModel->getCollection();           $output = $nodeModel->_collections;         if(\Core::countArray($output)>0){                foreach ($output as $key => $value) {                    $this->_teacherName = \Core::getValueFromArray($value, "first_name");                    $image = \Core::getValueFromArray($value, "image");                   if($image!="" && $image!="|||||"){                                             $output[\Core::getValueFromArray($value, "id")]["image"] = array("title"=>$this->_teacherName,"image"=>\Core::getUploadPath()."teachers/".\Core::getValueFromArray($value, "image"));                   }else{                       $output[\Core::getValueFromArray($value, "id")]["image"] = $this->teacherBlankImageAction();                   }                  }            }        return $output;        }     public function teacherBlankImageAction(){        $wp = new \Core\WebsiteSettings();        $data = [];        $data["title"] = $this->_teacherName;        $data["image"] = $wp->websiteUrl."img/teacher_logo.jpg";        return $data;    }    }