<?php/* * To change this license header, choose License Headers in Project Properties. * To change this template file, choose Tools | Templates * and open the template in the editor. *//** * Description of AcdExaminationMarks * * @author ramesh */namespace Modules\Staffmanagement\Models;use Core\Model\Node;class StaffStaffDeatils extends Node{    public $_teacherId = NULL;    public $_admissionNo=NULL;    public function setTeacherId($teacherId) {        $this->_teacherId = $teacherId;        return $this;    }    public function getTeacherId() {        return $this->_teacherId;    }    public function setAdmissionNo($admissionNo) {        $this->_admissionNo = $admissionNo;        return $this;    }    public function getAdmissionNo() {        return $this->_admissionNo;    }    public function staffDetails(){                $nodeModel = \CoreClass::getModel($this->_nodeName);        $nodeModel->setNodeName($this->_nodeName);        $nodeModel->addCustomFieldToSelect("staff_staff_deatils.id", "id");        $nodeModel->addCustomFieldToSelect("staff_staff_deatils.staff_id", "staff_id");        $nodeModel->addCustomFieldToSelect("staff_staff_deatils.staff_code", "staff_code");        $nodeModel->addCustomFieldToSelect("staff_staff_deatils.first_name", "first_name");        $nodeModel->addCustomFieldToSelect("staff_staff_deatils.middle_name", "middle_name");        $nodeModel->addCustomFieldToSelect("staff_staff_deatils.last_name", "last_name");        $nodeModel->addCustomFieldToSelect("staff_staff_deatils.date_of_birth", "date_of_birth");        $nodeModel->addCustomFieldToSelect("staff_staff_deatils.email", "email");        $nodeModel->addCustomFieldToSelect("staff_staff_deatils.phone_number", "phone_number");        $nodeModel->addCustomFieldToSelect("staff_staff_deatils.mobile_number", "mobile_number");        $nodeModel->addCustomFieldToSelect("staff_staff_deatils.image", "image");        $nodeModel->addCustomFieldToSelect("staff_staff_deatils.address", "address");        $nodeModel->addCustomFieldToSelect("core_country.name", "country");        $nodeModel->addCustomFieldToSelect("core_list_state.name", "state");        $nodeModel->addCustomFieldToSelect("core_list_city.name", "city");        $nodeModel->addCustomFieldToSelect("staff_staff_deatils.pincode", "pincode");        $nodeModel->addCustomFieldToSelect("staff_designation.name", "designation");        $nodeModel->addCustomJoin("staff_staff_info.id", "staff_staff_info", "staff_staff_info", "staff_staff_info.staff_staff_deatils_id=staff_staff_deatils.id");        $nodeModel->addCustomJoin("staff_designation.id", "staff_designation", "staff_designation", "staff_designation.code=staff_staff_info.staff_designation_id");        $nodeModel->addCustomJoin("core_country.id", "core_country", "core_country", "core_country.short_code=staff_staff_deatils.core_country_id");        $nodeModel->addCustomJoin("core_list_state.id", "core_list_state", "core_list_state", "core_list_state.id=staff_staff_deatils.core_list_state_id");        $nodeModel->addCustomJoin("core_list_city.id", "core_list_city", "core_list_city", "core_list_city.id=staff_staff_deatils.core_list_city_id");        $nodeModel->addCustomFilter("staff_staff_deatils.id='" . $this->getTeacherId() . "'");        $nodeModel->getCollection();                $output = $nodeModel->getRecord();         if(\Core::countArray($output)>0)        {            $nodeModel = \CoreClass::getModel("staff_staff_education");            $nodeModel->setTeacherId(\Core::getValueFromArray($output, "id"));            $result=$nodeModel->staffEducationDetails();            $output["education"]=$result;        }        if(\Core::countArray($output)>0){                $this->_teacherName = \Core::getValueFromArray($output, "first_name");                $image = \Core::getValueFromArray($output, "image");               if($image!="" && $image!="|||||"){                                         $output["image"] = array("title"=>$this->_teacherName,"image"=>\Core::getUploadPath()."teachers/".\Core::getValueFromArray($output, "image"));               }else{                   $output["image"] = $this->teacherBlankImageAction();               }              }         return $output;    }    public function teacherBlankImageAction(){        $wp = new \Core\WebsiteSettings();        $data = [];        $data["title"] = $this->_teacherName;        $data["image"] = $wp->websiteUrl."img/teacher_logo.jpg";        return $data;    }}